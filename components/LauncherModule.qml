import QtQuick

Item {
    id: root

    // ==========================================
    // 1. ИДЕНТИФИКАЦИЯ (Используется для FZF и CLI)
    // ==========================================

    // Уникальный ID модуля (например, "clipboard", "calc"). Используется для вызова через CLI/шорткаты
    property string moduleId: ""

    // Название модуля для отображения в левом списке при выборе
    property string name: ""

    // Описание модуля для левого списка
    property string description: ""

    // Иконка (юникод или путь) для левого списка
    property string icon: ""

    // Строка-триггер (БЕЗ магического символа). Например: "gif", "pic", "calc"
    property string trigger: ""

    // ==========================================
    // 2. СОСТОЯНИЕ (Управляется Менеджером)
    // ==========================================

    // Флаг, указывающий, что этот модуль сейчас активен
    property bool isActive: false

    // ==========================================
    // 3. НАСТРОЙКИ ИНТЕРФЕЙСА (Панели)
    // ==========================================

    property bool hasLeftPanel: true
    property bool hasRightPanel: true

    // Кастомные размеры (если -1, Менеджер использует дефолтные из конфига)
    property real customTotalWidth: -1
    property real customRightWidth: -1

    // Высота правой панели используется Менеджером, ТОЛЬКО если hasLeftPanel === false
    property real customRightHeight: -1

    // ==========================================
    // 4. ДАННЫЕ И КОМПОНЕНТЫ (UI)
    // ==========================================

    // Модель данных для LeftPanel (массив объектов или ListModel/QAbstractListModel).
    // Должна соответствовать формату твоего UniversalDelegate.
    property var listModel: null

    // UI для правой панели (Превью, настройки и т.д.)
    property Component rightPanelComponent: null

    // UI для расширения строки ввода (например, кнопка настроек справа от RowInput)
    property Component inputExtensionComponent: null

    // Компонент с шорткатами (Action / Shortcut).
    // Менеджер будет инстанцировать его ТОЛЬКО когда модуль активен И открыта правая панель.
    property Component shortcutsComponent: null

    // ==========================================
    // 5. МЕТОДЫ ЖИЗНЕННОГО ЦИКЛА
    // ==========================================

    // Вызывается Менеджером каждый раз, когда меняется текст в RowInput (исключая триггер)
    function handleInput(query: string) {
        // Переопределяется в наследниках (например, для запуска поиска)
    }

    // Вызывается Менеджером при активации модуля (например, по Enter из поиска или через CLI)
    // initialQuery - текст, который мог быть передан при вызове из CLI
    function onActivated(initialQuery: string) {
        // Переопределяется в наследниках
    }

    // Вызывается Менеджером перед закрытием модуля (например, по двойному Backspace)
    function onDeactivated() {
        // Переопределяется в наследниках (очистка моделей, сброс таймеров)
    }

    // ==========================================
    // 6. СИГНАЛЫ
    // ==========================================

    // Модуль может вызвать этот сигнал, чтобы принудительно закрыть сам себя (например, при клике/выборе элемента)
    // closeLauncher: если true, закроется весь лаунчер; если false, лаунчер вернется в дефолтное состояние.
    signal requestClose(bool closeLauncher)
}
